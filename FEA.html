<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FEA Nozzle Simulator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="banner-placeholder"></div>

    <div class="title">
        <h1>FEA Nozzle Simulator</h1>
    </div>

    <div class="main-layout">
        <div class="left-section">
            <div class="canvas-area">
                <canvas id="fea-canvas" width="1000" height="500"></canvas>
            
                <div class="colorbar-container">
                    <div id="colorbar-title" class="colorbar-labels">Velocity</div>
                    <div id="max-label" class="colorbar-labels">0.000</div>
                    <canvas id="colorbar" width="30" height="400"></canvas>
                    <div id="mid-label" class="colorbar-labels" style="position: absolute; margin-top: 150px;">0.000</div>
                    <div id="min-label" class="colorbar-labels">0.000</div>
                </div>
            </div>
            <div class="controls">
                <strong>Visualization Mode:</strong>
                <label><input type="radio" name="vizMode" value="pressure">Pressure</label>
                <label><input type="radio" name="vizMode" value="velocity" checked>Velocity</label>
                <label><input type="radio" name="vizMode" value="temperature">Temperature</label>
                <label><input type="radio" name="vizMode" value="density">Density</label>
            </div>

            <div class="stats">
                <div class="stat-item">Min: <span id="min-value" class="stat-value">0.00</span></div>
                <div class="stat-item">Avg: <span id="avg-value" class="stat-value">0.00</span></div>
                <div class="stat-item">Max: <span id="max-value" class="stat-value">0.00</span></div>
            </div>
        </div>

        <div class="right-section">
            <div class="convergence-info">
                <h3>Simulation Status</h3>
                <div class="convergence-metric">
                    <span class="status-indicator" id="status-indicator"></span>
                    Status: <span id="simulation-status">Initializing</span>
                </div>
                <div class="convergence-metric">
                    Time Step: <span class="convergence-value" id="time-step">0</span>
                </div>
                <div class="convergence-metric">
                    Iterations: <span class="convergence-value" id="total-iterations">0</span>
                </div>
                <div class="convergence-metric">
                    Velocity Residual: <span class="convergence-value" id="velocity-residual">-</span>
                </div>
                <div class="convergence-metric">
                    Pressure Residual: <span class="convergence-value" id="pressure-residual">-</span>
                </div>
                <div class="convergence-metric">
                    Mass Residual: <span class="convergence-value" id="mass-residual">-</span>
                </div>
            </div>

            <div class="convergence-controls">
                <h3>Controls</h3>
                <button class="control-button" id="start-btn">Start</button>
                <button class="control-button" id="pause-btn" disabled>Pause</button>
                <button class="control-button" id="reset-btn">Reset</button>
                <hr>
                <div style="margin: 10px 0;">
                    <label>Velocity Tolerance:</label><br>
                    <input type="number" class="tolerance-input" id="vel-tolerance" value="1e-6" step="1e-7" placeholder="1e-6"> 
                </div>
                <div style="margin: 10px 0;">
                    <label>Pressure Tolerance:</label><br>
                    <input type="number" class="tolerance-input" id="press-tolerance" value="1e-6" step="1e-7" placeholder="1e-6"> 
                </div>
                <div style="margin: 10px 0;">
                    <label>Mass Tolerance:</label><br>
                    <input type="number" class="tolerance-input" id="mass-tolerance" value="1e-6" step="1e-7" placeholder="1e-6"> 
                </div>
            </div>

            <div class="convergence-canvas">
                <h3>Convergence History</h3>
                <canvas id="convergence-canvas" width="400" height="250"></canvas>
            </div>        
        </div>
    </div>

    <script src="FEAnozzle.js" defer></script>
    <script src="loadBanner.js" defer></script>
</body>
</html>