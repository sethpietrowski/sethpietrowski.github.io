import{r as i,j as l}from"./index-CV8Xsr18.js";import{S as V,P as X,W as Y,B as T,M as q,a as B,b as F,A as K,V as y}from"./three.module-qlWS_LQF.js";const Z=()=>{const p=i.useRef(null),j=i.useRef(null),h=i.useRef(null),v=i.useRef(null),D=i.useRef(null),[k,W]=i.useState(!0),[z,H]=i.useState(!1),o=i.useRef({w:!1,a:!1,s:!1,d:!1,space:!1,control:!1});i.useEffect(()=>{if(!p.current||k)return;const r=p.current;r.innerHTML="";const u=new V,n=new X(75,r.clientWidth/r.clientHeight,.1,1e3),s=new Y({antialias:!0});s.setSize(r.clientWidth,r.clientHeight),r.appendChild(s.domElement),v.current=s;const L=new T,E=new q({color:65280}),w=new B(L,E);u.add(w),n.position.set(0,0,5),n.lookAt(w.position),n.fov=60,n.updateProjectionMatrix();const g=new F(16777215,1,100);g.position.set(10,10,10),u.add(g);const G=new K(16777215,.5);u.add(G);const a={camera:n,domElement:s.domElement,isLocked:!1,lock:()=>{s.domElement.requestPointerLock()},unlock:()=>{document.exitPointerLock()}};D.current=a,j.current={scene:u,camera:n,renderer:s,cube:w,controls:a};const c=document.createElement("div");c.className="pointer-lock-indicator",c.innerText=/Mobi|Android/i.test(navigator.userAgent)?"3D Game is not supported on mobile.":"Click Here to Activate Viewport",c.style.display=z?"none":"block",r.appendChild(c);const d=.05;let x=0,f=0;const b=()=>{const e=document.pointerLockElement===s.domElement;a.isLocked=e,H(e),c.style.display=e?"none":"block",e?document.body.style.cursor="none":document.body.style.cursor="default"},M=e=>{e.target===c&&!a.isLocked&&a.lock()},C=e=>{if(a.isLocked){const t=e.movementX||0,m=e.movementY||0;x-=t*.002,f-=m*.002,f=Math.max(-Math.PI/2,Math.min(Math.PI/2,f)),n.rotation.order="YXZ",n.rotation.x=f,n.rotation.y=x}},R=e=>{const t=e.key.toLowerCase();t===" "?(e.preventDefault,o.current.space=!0):t==="control"?o.current.control=!0:t in o.current&&(o.current[t]=!0)},S=e=>{const t=e.key.toLowerCase();t===" "?o.current.space=!1:t==="control"?o.current.control=!1:t in o.current&&(o.current[t]=!1)},P=()=>{const e=r.clientWidth,t=r.clientHeight;s.setSize(e,t),n.aspect=e/t,n.updateProjectionMatrix()};document.addEventListener("pointerlockchange",b),c.addEventListener("click",M),document.addEventListener("mousemove",C),window.addEventListener("keydown",R),window.addEventListener("keyup",S),window.addEventListener("resize",P);const A=()=>{if(h.current=requestAnimationFrame(A),a.isLocked){const e=new y,t=new y;n.getWorldDirection(t);const m=new y;m.crossVectors(t,n.up).normalize(),o.current.w&&e.add(t.clone().multiplyScalar(d)),o.current.s&&e.add(t.clone().multiplyScalar(-d)),o.current.a&&e.add(m.clone().multiplyScalar(-d)),o.current.d&&e.add(m.clone().multiplyScalar(d)),o.current.space&&(e.y+=d),o.current.control&&(e.y-=d),n.position.add(e)}s.render(u,n)};return A(),()=>{h.current&&cancelAnimationFrame(h.current),document.removeEventListener("pointerlockchange",b),c.removeEventListener("click",M),document.removeEventListener("mousemove",C),document.removeEventListener("keydown",R),document.removeEventListener("keyup",S),window.removeEventListener("resize",P),document.body.style.cursor="default",r&&r.contains(c)&&r.removeChild(c),v.current&&v.current.dispose(),L.dispose(),E.dispose()}},[k]);const I=()=>{W(!1)};return l.jsxs("div",{className:"three-d-game-container",children:[k&&l.jsx("div",{id:"instructions-overlay",children:l.jsxs("div",{id:"instructions-box",children:[l.jsx("h2",{children:"Movement Controls"}),l.jsx("p",{children:"Click: activate viewport. Esc: deactivate viewport. W,S: forward/back. A/D: left/right. Space/Ctrl: up/down. Move mouse to rotate camera."}),l.jsx("button",{id:"accept-btn",onClick:I,children:"Accept"})]})}),l.jsx("div",{ref:p,style:{width:"100%",height:"100vh",position:"relative",overflow:"hidden"}})]})};export{Z as default};
//# sourceMappingURL=ThreeDGame-CUFssVDp.js.map
