import{r as a,j as u}from"./index-CV8Xsr18.js";import{S as X,P as Y,W as I,T as P,c as U,a as W,A as H,D as T}from"./three.module-qlWS_LQF.js";const G=()=>{const v=a.useRef(null),z=a.useRef(null),f=a.useRef(null),p=a.useRef(null),[B,w]=a.useState(!1),e=a.useRef({isActive:!1,rotationX:0,rotationY:0,moveForward:!1,moveBackward:!1,moveLeft:!1,moveRight:!1,moveUp:!1,moveDown:!1,isRotating:!1});return a.useEffect(()=>{if(!v.current)return;const n=v.current,l=new X,d=new Y(75,n.clientWidth/n.clientHeight,.1,1e3),r=new I({antialias:!0});r.setSize(n.clientWidth,n.clientHeight),n.appendChild(r.domElement),p.current=r;const h=new P,j=`
      varying vec3 vNormal;
      void main() {
        vNormal = normalize(normalMatrix * normal);
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      }`,N=`
      varying vec3 vNormal;
      void main() {
        vec3 lightDirection = normalize(vec3(-1.0,1.0,0.0)); //light location is to left and above camera
        float intensity = pow(max(dot(vNormal, lightDirection), 0.0), 2.5); // make edges glow
        gl_FragColor = vec4(0.0, intensity, 0.0, 1.0); // greenish glow on edges
      }`,g=new U({vertexShader:j,fragmentShader:N,wireframe:!1}),o=new W(h,g);l.add(o),d.position.z=5;const F=new H(16777215,.7);l.add(F);const k=new T(16777215,.7);k.position.set(-1,-1,-1).normalize(),l.add(k),z.current={scene:l,camera:d,renderer:r,cube:o};const s=.1,E=.003,i=document.createElement("div"),c=document.createElement("div");i.innerText="Click Here to Activate Viewport",i.className="activate-indicator",c.innerText="Press Esc to Exit Viewport",c.className="exit-indicator",n.appendChild(i),n.appendChild(c);const y=t=>{i.style.display=t?"none":"block",c.style.display=t?"block":"none"},b=t=>{console.log("Activate button clicked"),w(!0),e.current.isActive=!0,y(!0),t.stopPropagation()},x=t=>{if(t.key==="Escape"&&e.current.isActive){w(!1),e.current.isActive=!1,y(!1);return}if(e.current.isActive)switch(t.key.toLowerCase()){case"w":e.current.moveForward=!0;break;case"s":e.current.moveBackward=!0;break;case"a":e.current.moveLeft=!0;break;case"d":e.current.moveRight=!0;break;case" ":t.preventDefault(),e.current.moveUp=!0;break;case"control":e.current.moveDown=!0;break;case"arrowup":o.position.y+=1;break;case"arrowdown":o.position.y-=1;break;case"arrowleft":o.position.x-=1;break;case"arrowright":o.position.x+=1;break}},L=t=>{switch(t.key.toLowerCase()){case"w":e.current.moveForward=!1;break;case"s":e.current.moveBackward=!1;break;case"a":e.current.moveLeft=!1;break;case"d":e.current.moveRight=!1;break;case" ":e.current.moveUp=!1;break;case"control":e.current.moveDown=!1;break}},A=t=>{e.current.isActive&&t.button===0&&(console.log("Mouse down - starting rotation"),e.current.isRotating=!0,t.preventDefault())},R=t=>{t.button===0&&(console.log("Mouse up - stopping rotation"),e.current.isRotating=!1)},D=t=>{if(e.current.isActive&&e.current.isRotating){const m=t.movementX||0,S=t.movementY||0;console.log("Mouse move - deltaX:",m,"deltaY:",S),e.current.rotationX+=S*E,e.current.rotationY+=m*E}},M=()=>{const t=n.clientWidth,m=n.clientHeight;r.setSize(t,m),d.aspect=t/m,d.updateProjectionMatrix()};i.addEventListener("click",b),document.addEventListener("keydown",x),document.addEventListener("keyup",L),n.addEventListener("mousedown",A),n.domElement.addEventListener("mouseup",R),n.domElement.addEventListener("mousemove",D),window.addEventListener("resize",M),console.log("Event listeners added to:",{gameArea:n,rendererElement:r.domElement});const C=()=>{f.current=requestAnimationFrame(C),e.current.isRotating&&e.current.isActive&&(o.rotation.x+=e.current.rotationX,o.rotation.y+=e.current.rotationY,e.current.rotationX=0,e.current.rotationY=0),e.current.isActive&&(e.current.moveForward&&(o.position.z+=s),e.current.moveBackward&&(o.position.z-=s),e.current.moveLeft&&(o.position.x+=s),e.current.moveRight&&(o.position.x-=s),e.current.moveUp&&(o.position.y-=s),e.current.moveDown&&(o.position.y+=s)),r.render(l,d)};return C(),()=>{f.current&&cancelAnimationFrame(f.current),i.removeEventListener("click",b),document.removeEventListener("keydown",x),document.removeEventListener("keyup",L),r.domElement.removeEventListener("mousedown",A),r.domElement.removeEventListener("mouseup",R),r.domElement.removeEventListener("mousemove",D),window.removeEventListener("resize",M),n&&n.contains(i)&&n.removeChild(i),n&&n.contains(c)&&n.removeChild(c),p.current&&p.current.dispose(),h.dispose(),g.dispose()}},[]),u.jsxs("div",{className:"three-d-model-container",children:[u.jsxs("div",{className:"container",children:[u.jsx("h1",{children:"3D Interactive Model"}),u.jsx("p",{style:{textAlign:"center"},children:"Click viewport to activate. Click esc to deactivate viewport. W,S move in into screen/away from screen. A/D move sideways. Space/Ctrl move up/down. Hold down and drag left mouse button to rotate."})]}),u.jsx("div",{ref:v,style:{width:"100%",height:"100vh",position:"relative",overflow:"hidden"}})]})};export{G as default};
//# sourceMappingURL=ThreeDModel-Bh4SvL3f.js.map
