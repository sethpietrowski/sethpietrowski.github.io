import{r as s,j as u}from"./index-CDocZZU0.js";import{S as I,P,W as U,T as W,c as H,a as T,A as B,D as K}from"./three.module-qlWS_LQF.js";const G=()=>{const f=s.useRef(null),i=s.useRef(null),p=s.useRef(null),n=s.useRef(null),[V,w]=s.useState(!1),e=s.useRef({isActive:!1,rotationX:0,rotationY:0,moveForward:!1,moveBackward:!1,moveLeft:!1,moveRight:!1,moveUp:!1,moveDown:!1,isRotating:!1});return s.useEffect(()=>{if(!f.current)return;const r=f.current;for(;r.firstChild;)r.removeChild(r.firstChild);const d=new I,m=new P(75,r.clientWidth/r.clientHeight,.1,1e3),o=new U({antialias:!0});o.setSize(r.clientWidth,r.clientHeight),r.appendChild(o.domElement),n.current=o;const h=new W,S=`
      varying vec3 vNormal;
      void main() {
        vNormal = normalize(normalMatrix * normal);
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      }`,j=`
      varying vec3 vNormal;
      void main() {
        vec3 lightDirection = normalize(vec3(-1.0,1.0,0.0)); //light location is to left and above camera
        float intensity = pow(max(dot(vNormal, lightDirection), 0.0), 2.5); // make edges glow
        gl_FragColor = vec4(0.0, intensity, 0.0, 1.0); // greenish glow on edges
      }`,g=new H({vertexShader:S,fragmentShader:j,wireframe:!1}),b=new T(h,g);d.add(b),m.position.z=5;const N=new B(16777215,.7);d.add(N);const E=new K(16777215,.7);E.position.set(-1,-1,-1).normalize(),d.add(E),i.current={scene:d,camera:m,renderer:o,cube:b};const c=.1,k=.01,a=document.createElement("div"),l=document.createElement("div");a.innerText="Click Here to Activate Viewport",a.className="activate-indicator",l.innerText="Press Esc to Exit Viewport",l.className="exit-indicator",r.appendChild(a),r.appendChild(l);const y=t=>{a.style.display=t?"none":"block",l.style.display=t?"block":"none"},x=t=>{w(!0),e.current.isActive=!0,y(!0),n.current&&n.current.domElement&&(n.current.domElement.style.cursor="grab",n.current.domElement.style.pointerEvents="auto",n.current.domElement.style.position="relative",n.current.domElement.style.zIndex="1"),t.stopPropagation()},L=t=>{if(t.key==="Escape"&&e.current.isActive){w(!1),e.current.isActive=!1,y(!1);return}if(e.current.isActive)switch(t.key.toLowerCase()){case"w":e.current.moveForward=!0;break;case"s":e.current.moveBackward=!0;break;case"a":e.current.moveLeft=!0;break;case"d":e.current.moveRight=!0;break;case" ":t.preventDefault(),e.current.moveUp=!0;break;case"control":e.current.moveDown=!0;break;case"arrowup":i.current.cube.position.y+=1;break;case"arrowdown":i.current.cube.position.y-=1;break;case"arrowleft":i.current.cube.position.x-=1;break;case"arrowright":i.current.cube.position.x+=1;break}},A=t=>{switch(t.key.toLowerCase()){case"w":e.current.moveForward=!1;break;case"s":e.current.moveBackward=!1;break;case"a":e.current.moveLeft=!1;break;case"d":e.current.moveRight=!1;break;case" ":e.current.moveUp=!1;break;case"control":e.current.moveDown=!1;break}},R=t=>{e.current.isActive&&t.button===0&&(e.current.isRotating=!0,n.current&&(n.current.domElement.style.cursor="grabbing"),t.preventDefault())},C=t=>{t.button===0&&(e.current.isRotating=!1,e.current.isActive&&n.current&&(n.current.domElement.style.cursor="grab"))},D=t=>{if(!(!e.current.isActive||!e.current.isRotating)&&i.current){const v=t.movementX||0,F=t.movementY||0;i.current.cube.rotation.x+=F*k,i.current.cube.rotation.y+=v*k}},z=()=>{const t=r.clientWidth,v=r.clientHeight;o.setSize(t,v),m.aspect=t/v,m.updateProjectionMatrix()};a.addEventListener("click",x),document.addEventListener("keydown",L),document.addEventListener("keyup",A),o.domElement.addEventListener("mousedown",R),o.domElement.addEventListener("mouseup",C),o.domElement.addEventListener("mousemove",D),window.addEventListener("resize",z);const M=()=>{if(p.current=requestAnimationFrame(M),e.current.isActive&&i.current){const t=i.current.cube;e.current.moveForward&&(t.position.z+=c),e.current.moveBackward&&(t.position.z-=c),e.current.moveLeft&&(t.position.x+=c),e.current.moveRight&&(t.position.x-=c),e.current.moveUp&&(t.position.y-=c),e.current.moveDown&&(t.position.y+=c)}o.render(d,m)};return M(),()=>{p.current&&cancelAnimationFrame(p.current),a.removeEventListener("click",x),document.removeEventListener("keydown",L),document.removeEventListener("keyup",A),o.domElement.removeEventListener("mousedown",R),o.domElement.removeEventListener("mouseup",C),o.domElement.removeEventListener("mousemove",D),window.removeEventListener("resize",z),r&&r.contains(a)&&r.removeChild(a),r&&r.contains(l)&&r.removeChild(l),n.current&&n.current.dispose(),h.dispose(),g.dispose()}},[]),u.jsxs("div",{className:"three-d-model-container",children:[u.jsxs("div",{className:"container",children:[u.jsx("h1",{children:"3D Interactive Model"}),u.jsx("p",{style:{textAlign:"center"},children:"Click viewport to activate. Click esc to deactivate viewport. W,S move in into screen/away from screen. A/D move sideways. Space/Ctrl move up/down. Hold down and drag left mouse button to rotate."})]}),u.jsx("div",{ref:f,style:{width:"100%",height:"100vh",position:"relative",overflow:"hidden"}})]})};export{G as default};
//# sourceMappingURL=ThreeDModel-DLEN8YgO.js.map
