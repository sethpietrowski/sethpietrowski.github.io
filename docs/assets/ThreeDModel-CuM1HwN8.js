import{r as s,j as u}from"./index-DGbprd2E.js";import{S as P,P as U,W,T as H,c as T,a as V,A as B,D as G,Q as M,V as S}from"./three.module-ClgO-G5v.js";const _=()=>{const g=s.useRef(null),h=s.useRef(null),k=s.useRef(null),y=s.useRef(null),[E,L]=s.useState(!1),e=s.useRef({isActive:!1,targetX:0,targetY:0,rotationX:0,rotationY:0,moveForward:!1,moveBackward:!1,moveLeft:!1,moveRight:!1,moveUp:!1,moveDown:!1,isRotating:!1});return s.useEffect(()=>{if(!g.current)return;const n=g.current,m=new P,d=new U(75,n.clientWidth/n.clientHeight,.1,1e3),r=new W({antialias:!0});r.setSize(n.clientWidth,n.clientHeight),n.appendChild(r.domElement),y.current=r;const b=new H,X=`
      varying vec3 vNormal;
      void main() {
        vNormal = normalize(normalMatrix * normal);
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      }`,Y=`
      varying vec3 vNormal;
      void main() {
        vec3 lightDirection = normalize(vec3(-1.0,1.0,0.0)); //light location is to left and above camera
        float intensity = pow(max(dot(vNormal, lightDirection), 0.0), 2.5); // make edges glow
        gl_FragColor = vec4(0.0, intensity, 0.0, 1.0); // greenish glow on edges
      }`,A=new T({vertexShader:X,fragmentShader:Y,wireframe:!1}),o=new V(b,A);m.add(o),d.position.z=5;const j=new B(16777215,.7);m.add(j);const R=new G(16777215,.7);R.position.set(-1,-1,-1).normalize(),m.add(R),h.current={scene:m,camera:d,renderer:r,cube:o};const c=.1,a=document.createElement("div"),i=document.createElement("div");a.innerText="Click Here to Activate Viewport",a.className="pointer-lock-indicator exit-indicator",i.innerText="Press Esc to Exit Viewport",i.className="pointer-lock-indicator exit-indicator",i.style.display="none",i.style.top="20px",i.style.left="20px",i.style.transform="none",n.appendChild(a),n.appendChild(i);const D=t=>{a.style.display=t?"none":"block",i.style.display=t?"block":"none"},z=t=>{t.target===a&&!E&&(L(!0),e.current.isActive=!0,D(!0))},F=t=>{if(t.key==="Escape"&&E){L(!1),e.current.isActive=!1,D(!1);return}if(e.current.isActive)switch(t.key.toLowerCase()){case"w":e.current.moveForward=!0;break;case"s":e.current.moveBackward=!0;break;case"a":e.current.moveLeft=!0;break;case"d":e.current.moveRight=!0;break;case" ":t.preventDefault(),e.current.moveUp=!0;break;case"control":e.current.moveDown=!0;break;case"arrowup":o.position.y+=1;break;case"arrowdown":o.position.y-=1;break;case"arrowleft":o.position.x-=1;break;case"arrowright":o.position.x+=1;break}},N=t=>{switch(t.key.toLowerCase()){case"w":e.current.moveForward=!1;break;case"s":e.current.moveBackward=!1;break;case"a":e.current.moveLeft=!1;break;case"d":e.current.moveRight=!1;break;case" ":e.current.moveUp=!1;break;case"control":e.current.moveDown=!1;break}},q=()=>{const t=n.clientWidth,l=n.clientHeight;r.setSize(t,l),d.aspect=t/l,d.updateProjectionMatrix()};canvas.addEventListener("click",()=>{canvas.requestPointerLock()}),document.pointerLockElement===canvas?(document.addEventListener("mousemove",p),document.addEventListener("mouseup",f),document.addEventListener("mousedown",v)):(document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",f),document.removeEventListener("mousedown",v));function v(t){isDragging=!0,prevX=t.clientX,prevY=t.clientY}function p(t){if(!isDragging)return;const l=t.clientX-prevX,w=t.clientY-prevY;o.rotation.y+=l*.01,o.rotation.x+=w*.01,prevX=t.clientX,prevY=t.clientY}function f(){isDragging=!1}const I=()=>{if(e.current.isRotating){const{rotationX:t,rotationY:l}=e.current,w=new M,C=new M;C.setFromAxisAngle(new S(0,1,0),l),w.setFromAxisAngle(new S(1,0,0),t),h.current.cube.quaternion.multiply(C),h.current.cube.quaternion.multiply(w),e.current.rotationX=0,e.current.rotationY=0}};performance.now(),r.domElement.addEventListener("mousedown",v),r.domElement.addEventListener("mousemove",p),r.domElement.addEventListener("mouseup",f);const x=()=>{k.current=requestAnimationFrame(x),performance.now(),e.current&&E&&(I(),e.current.moveForward&&(o.position.z+=c),e.current.moveBackward&&(o.position.z-=c),e.current.moveLeft&&(o.position.x+=c),e.current.moveRight&&(o.position.x-=c),e.current.moveUp&&(o.position.y-=c),e.current.moveDown&&(o.position.y+=c)),requestAnimationFrame(x),r.render(m,d)};return x(),()=>{k.current&&cancelAnimationFrame(k.current),a.removeEventListener("click",z),document.removeEventListener("keydown",F),document.removeEventListener("keyup",N),r.domElement.removeEventListener("mousedown",v),r.domElement.removeEventListener("mouseup",f),r.domElement.removeEventListener("mousemove",p),window.removeEventListener("resize",q),n&&n.contains(a)&&n.removeChild(a),n&&n.contains(i)&&n.removeChild(i),y.current&&y.current.dispose(),b.dispose(),A.dispose()}},[]),u.jsxs("div",{className:"three-d-model-container",children:[u.jsxs("div",{className:"container",children:[u.jsx("h1",{children:"3D Interactive Model"}),u.jsx("p",{style:{textAlign:"center"},children:"Click viewport to activate. Click esc to deactivate viewport. W,S move in into screen/away from screen. A/D move sideways. Space/Ctrl move up/down. Hold down and drag left mouse button to rotate."})]}),u.jsx("div",{ref:g,style:{width:"100%",height:"100vh",position:"relative",overflow:"hidden"}})]})};export{_ as default};
//# sourceMappingURL=ThreeDModel-CuM1HwN8.js.map
