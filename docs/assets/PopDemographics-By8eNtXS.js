import{r as n,j as e,B as D,R as L}from"./index-DGbprd2E.js";import{c as N}from"./createLucideIcon-B6dLNN4-.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],U=N("calendar",O);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],R=N("graduation-cap",V);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],P=N("map-pin",H);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],b=N("refresh-cw",z);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],W=N("triangle-alert",K);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],q=N("users",Y),w={AK:{row:10,col:0},HI:{row:10,col:1},WA:{row:1,col:1},OR:{row:2,col:1},CA:{row:3,col:1},NV:{row:3,col:2},ID:{row:2,col:2},MT:{row:1,col:3},WY:{row:2,col:3},UT:{row:3,col:3},CO:{row:3,col:4},AZ:{row:4,col:2},NM:{row:4,col:3},ND:{row:1,col:4},SD:{row:2,col:4},NE:{row:3,col:5},KS:{row:4,col:5},OK:{row:5,col:5},TX:{row:6,col:4},MN:{row:1,col:5},IA:{row:2,col:5},MO:{row:3,col:6},AR:{row:4,col:6},LA:{row:5,col:6},WI:{row:1,col:6},IL:{row:2,col:6},MS:{row:5,col:7},AL:{row:5,col:8},TN:{row:4,col:7},KY:{row:3,col:7},IN:{row:2,col:7},MI:{row:1,col:7},OH:{row:2,col:8},WV:{row:3,col:8},VA:{row:4,col:9},NC:{row:5,col:9},SC:{row:6,col:9},GA:{row:6,col:8},FL:{row:7,col:9},PA:{row:2,col:9},NY:{row:1,col:9},VT:{row:1,col:10},NH:{row:1,col:11},ME:{row:0,col:11},MA:{row:2,col:10},RI:{row:2,col:11},CT:{row:3,col:10},NJ:{row:3,col:9},DE:{row:4,col:10},MD:{row:4,col:8},DC:{row:4,col:8}},k="2022",A=`/data/census-${k}.json`,j={population:"B01003_001E",age:{Total:"B01001_001E","18-34":["B01001_007E","B01001_008E","B01001_009E","B01001_010E","B01001_011E","B01001_012E","B01001_031E","B01001_032E","B01001_033E","B01001_034E","B01001_035E","B01001_036E"],"35-64":["B01001_013E","B01001_014E","B01001_015E","B01001_016E","B01001_017E","B01001_018E","B01001_019E","B01001_037E","B01001_038E","B01001_039E","B01001_040E","B01001_041E","B01001_042E","B01001_043E"],"65+":["B01001_020E","B01001_021E","B01001_022E","B01001_023E","B01001_024E","B01001_025E","B01001_044E","B01001_045E","B01001_046E","B01001_047E","B01001_048E","B01001_049E"]},race:{Total:"B02001_001E",White:"B02001_002E",Black:"B02001_003E",Asian:"B02001_005E",Hispanic:"B03003_003E"},education:{Total:"B15003_001E","High School":["B15003_017E","B15003_018E"],"Some College":["B15003_019E","B15003_020E"],"Bachelor's":"B15003_022E",Graduate:["B15003_023E","B15003_024E","B15003_025E"]},income:{Total:"B19001_001E","<$35k":["B19001_002E","B19001_003E","B19001_004E","B19001_005E","B19001_006E","B19001_007E"],"$35k-$75k":["B19001_008E","B19001_009E","B19001_010E","B19001_011E","B19001_012E"],"$75k+":["B19001_013E","B19001_014E","B19001_015E","B19001_016E","B19001_017E"]}},h={age:{label:"Age Groups",icon:U,color:"blue"},race:{label:"Race/Ethnicity",icon:q,color:"green"},education:{label:"Education",icon:R,color:"red"},income:{label:"Income",icon:P,color:"yellow"}},S=()=>{const s=[];return Object.keys(w).forEach(t=>{t!=="DC"&&s.push({state:t,population:Math.floor(Math.random()*1e7)+1e5,demographics:{age:{Total:100,"18-34":Math.random()*35+15,"35-64":Math.random()*45+25,"65+":Math.random()*25+10},race:{Total:100,White:Math.random()*80+10,Black:Math.random()*40+5,Asian:Math.random()*20+2,Hispanic:Math.random()*30+5},education:{Total:100,"High School":Math.random()*40+20,"Some College":Math.random()*30+15,"Bachelor's":Math.random()*25+10,Graduate:Math.random()*15+5},income:{Total:100,"<$35k":Math.random()*40+15,"$35k-$75k":Math.random()*40+20,"$75k+":Math.random()*30+15}}})}),s},G=(s,t)=>!s||!t?0:Math.min(s,t),C=(s,t,o)=>{const r=G(s,t);switch(o){case"blue":return`rgb(${255-Math.floor(r*200)}, ${255-Math.floor(r*100)}, 255)`;case"green":return`rgb(${255-Math.floor(r*200)}, 255, ${255-Math.floor(r*100)})`;case"purple":return`rgb(${200+Math.floor(r*55)}, ${255-Math.floor(r*200)}, 255)`;case"yellow":return`rgb(255, 255, ${255-Math.floor(r*200)})`;default:return`rgb(${255-Math.floor(r*100)}, ${255-Math.floor(r*100)}, ${255-Math.floor(r*100)})`}},F=s=>{const t=new Set;return Object.values(s).forEach(o=>{typeof o=="object"&&Object.values(o).forEach(r=>{Array.isArray(r)?r.forEach(c=>t.add(c)):t.add(r)})}),Array.from(t).join(",")},v=(s,t)=>{const o={};return Object.entries(t).forEach(([r,c])=>{Array.isArray(c)?o[r]=c.reduce((m,d)=>{const l=parseInt(s[d])||0;return m+l},0):o[r]=parseInt(s[c])||0}),o},J=async()=>{if(!CENSUS_API_KEY)return console.log("No Census API key provided, using mock data"),S();try{const s=F(j),t=`${CENSUS_BASE_URL}/${k}/acs/acs5?get=${s}&for=state:*&key=${CENSUS_API_KEY}`,o=await fetch(t);if(!o.ok)throw new Error(`API request failed: ${o.statusText}`);const r=await o.json(),[c,...m]=r;return m.map(d=>{const l={};c.forEach((_,g)=>{l[_]=d[g]});const p=l.state,x=X(p);return!x||!w[x]?null:{state:x,population:parseInt(l[j.population])||0,demographics:{age:M(v(l,j.age)),race:M(v(l,j.race)),education:M(v(l,j.education)),income:M(v(l,j.income))}}}).filter(Boolean)}catch(s){return console.error("Error fetching Census data:",s),S()}},M=s=>{const t=s.Total||1,o={};return Object.entries(s).forEach(([r,c])=>{r!=="Total"?o[r]=c/t*100:o[r]=c}),o},X=s=>({"01":"AL","02":"AK","04":"AZ","05":"AR","06":"CA","08":"CO","09":"CT",10:"DE",11:"DC",12:"FL",13:"GA",15:"HI",16:"ID",17:"IL",18:"IN",19:"IA",20:"KS",21:"KY",22:"LA",23:"ME",24:"MD",25:"MA",26:"MI",27:"MN",28:"MS",29:"MO",30:"MT",31:"NE",32:"NV",33:"NH",34:"NJ",35:"NM",36:"NY",37:"NC",38:"ND",39:"OH",40:"OK",41:"OR",42:"PA",44:"RI",45:"SC",46:"SD",47:"TN",48:"TX",49:"UT",50:"VT",51:"VA",53:"WA",54:"WV",55:"WI",56:"WY"})[s];function ee(){const[s,t]=n.useState([]),[o,r]=n.useState("age"),[c,m]=n.useState("18-34"),[d,l]=n.useState(null),[p,x]=n.useState(null),[_,g]=n.useState(!0),[B,y]=n.useState(!1);n.useEffect(()=>{(async()=>{g(!0);try{const i=await fetch(A);if(!i.ok)throw new Error(`Failed to load ${A}`);const f=await i.json();t(f),y(!1)}catch(i){console.error("Error loading static data:",i),t(S()),y(!0)}finally{g(!1)}})()},[]);const E=n.useMemo(()=>s.length?Math.max(...s.map(a=>a.demographics[o][c]||0)):100,[s,o,c]),T=n.useMemo(()=>s.length?Object.keys(s[0]?.demographics[o]||{}).filter(a=>a!=="Total"):[],[s,o]),u=a=>`${(a||0).toFixed(1)}%`,$=async()=>{g(!0);try{const a=await J();t(a)}catch(a){console.error("Error refreshing data:",a)}finally{g(!1)}};return _?e.jsx("div",{className:"w-full min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(b,{className:"animate-spin mx-auto mb-4",size:48}),e.jsx("p",{className:"text-lg text-gray-600",children:"Loading demographic data..."})]})}):e.jsxs("div",{className:"demographics-app",children:[e.jsx(D,{}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"demographics-header",children:[e.jsx("h1",{className:"demographics-title",children:"US Demographics Data Viewer"}),e.jsx("p",{className:"demographics-subtitle",children:"Explore real US Census demographic data by state"}),B&&e.jsxs("div",{className:"demographics-alert",children:[e.jsx(W,{className:"demographics-alert__icon",size:20}),e.jsxs("div",{className:"demographics-alert__content",children:[e.jsx("p",{className:"demographics-alert__title",children:"Using Mock Data"}),e.jsx("p",{className:"demographics-alert__text",children:"To use real Census data, consult me to insert or give you access to my API key."})]})]})]}),e.jsx("div",{className:"demographics-controls",children:e.jsxs("div",{className:"demographics-controls__grid",children:[e.jsxs("div",{className:"demographics-form-group",children:[e.jsx("label",{className:"demographics-form-label",children:"Demographic Category"}),e.jsx("select",{value:o,onChange:a=>{r(a.target.value);const i=Object.keys(s[0]?.demographics[a.target.value]||{}).filter(f=>f!=="Total");m(i[0]||"")},className:"demographics-form-select",children:Object.entries(h).map(([a,i])=>e.jsx("option",{value:a,children:i.label},a))})]}),e.jsxs("div",{className:"demographics-form-group",children:[e.jsx("label",{className:"demographics-form-label",children:"Specific Metric"}),e.jsx("select",{value:c,onChange:a=>m(a.target.value),className:"demographics-form-select",children:T.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsx("div",{className:"demographics-form-group",children:e.jsxs("button",{onClick:$,disabled:_,className:"demographics-btn",children:[e.jsx(b,{className:_?"animate-spin":"",size:16}),e.jsx("span",{children:"Refresh Data"})]})})]})}),e.jsxs("div",{className:"demographics-layout",children:[e.jsxs("div",{className:"demographics-map-section",children:[e.jsxs("div",{className:"demographics-map-header",children:[e.jsx("h2",{className:"demographics-map-title",children:"US States Visualization"}),e.jsxs("div",{className:"demographics-map-info",children:[L.createElement(h[o].icon,{size:20}),e.jsxs("span",{children:[h[o].label,": ",c]})]})]}),e.jsxs("div",{className:"demographics-map-container",children:[e.jsx("div",{className:"demographics-map-grid",children:s.map(a=>{const i=w[a.state];if(!i)return null;const f=a.demographics[o][c]||0,I=C(f,E,h[o].color);return e.jsx("div",{className:"state-tile",style:{backgroundColor:I,left:`${i.col/12*100}%`,top:`${i.row/11*100}%`},onMouseEnter:()=>l(a),onMouseLeave:()=>l(null),onClick:()=>x(a),title:`${a.state}: ${u(f)}`,children:a.state},a.state)})}),e.jsxs("div",{className:"demographics-legend",children:[e.jsx("div",{className:"demographics-legend__title",children:"Percentage Scale"}),e.jsxs("div",{className:"demographics-legend__scale",children:[e.jsx("span",{className:"demographics-legend__label",children:"0%"}),e.jsx("div",{className:"demographics-legend__colors",children:[0,.25,.5,.75,1].map((a,i)=>e.jsx("div",{className:"demographics-legend__color",style:{backgroundColor:C(a*E,E,h[o].color)}},i))}),e.jsx("span",{className:"demographics-legend__label",children:u(E)})]})]})]})]}),e.jsxs("div",{className:"demographics-sidebar",children:[e.jsxs("div",{className:"demographics-info-card",children:[e.jsx("h3",{className:"demographics-info-title",children:"Current Selection"}),e.jsxs("div",{className:"demographics-info-list",children:[e.jsxs("div",{className:"demographics-info-item",children:[e.jsx("span",{className:"demographics-info-label",children:"Metric:"}),e.jsx("span",{className:"demographics-info-value",children:h[o].label})]}),e.jsxs("div",{className:"demographics-info-item",children:[e.jsx("span",{className:"demographics-info-label",children:"Submetric:"}),e.jsx("span",{className:"demographics-info-value",children:c})]}),e.jsxs("div",{className:"demographics-info-item",children:[e.jsx("span",{className:"demographics-info-label",children:"Max Value:"}),e.jsx("span",{className:"demographics-info-value",children:u(E)})]}),e.jsxs("div",{className:"demographics-info-item",children:[e.jsx("span",{className:"demographics-info-label",children:"Data Source:"}),e.jsx("span",{className:"demographics-info-value",children:B?"Mock Data":"US Census ACS"})]})]})]}),d&&e.jsxs("div",{className:"demographics-info-card demographics-info-card--highlight",children:[e.jsx("h3",{className:"demographics-info-title demographics-info-title--highlight",children:"Hovered State"}),e.jsxs("div",{className:"demographics-state-details",children:[e.jsxs("div",{className:"demographics-state-header",children:[e.jsx("div",{className:"demographics-state-name demographics-state-name--highlight",children:d.state}),e.jsxs("div",{className:"demographics-state-population demographics-state-population--highlight",children:["Population: ",d.population.toLocaleString()]})]}),e.jsxs("div",{className:"demographics-info-item",children:[e.jsxs("span",{className:"demographics-info-label",children:[c,":"]}),e.jsx("span",{className:"demographics-info-value demographics-info-value--highlight",children:u(d.demographics[o][c])})]})]})]}),p&&e.jsxs("div",{className:"demographics-info-card",children:[e.jsx("h3",{className:"demographics-info-title",children:"State Details"}),e.jsxs("div",{className:"demographics-state-details",children:[e.jsxs("div",{className:"demographics-state-header",children:[e.jsx("div",{className:"demographics-state-name",children:p.state}),e.jsxs("div",{className:"demographics-state-population",children:["Population: ",p.population.toLocaleString()]})]}),e.jsxs("div",{className:"demographics-metric-section",children:[e.jsx("h4",{className:"demographics-metric-title",children:h[o].label}),e.jsx("div",{className:"demographics-info-list",children:Object.entries(p.demographics[o]).filter(([a])=>a!=="Total").map(([a,i])=>e.jsxs("div",{className:"demographics-metric-item",children:[e.jsxs("span",{className:`demographics-metric-name ${a===c?"demographics-metric-name--selected":""}`,children:[a,":"]}),e.jsx("span",{className:`demographics-metric-value ${a===c?"demographics-metric-value--selected":""}`,children:u(i)})]},a))})]})]})]}),e.jsxs("div",{className:"demographics-info-card",children:[e.jsx("h3",{className:"demographics-info-title",children:"Quick Stats"}),e.jsxs("div",{className:"demographics-info-list",children:[e.jsxs("div",{className:"demographics-info-item",children:[e.jsx("span",{className:"demographics-info-label",children:"Total States:"}),e.jsx("span",{className:"demographics-info-value",children:s.length})]}),e.jsxs("div",{className:"demographics-info-item",children:[e.jsxs("span",{className:"demographics-info-label",children:["Average ",c,":"]}),e.jsx("span",{className:"demographics-info-value",children:u(s.reduce((a,i)=>a+(i.demographics[o][c]||0),0)/s.length)})]}),e.jsxs("div",{className:"demographics-info-item",children:[e.jsx("span",{className:"demographics-info-label",children:"Highest State:"}),e.jsx("span",{className:"demographics-info-value",children:s.reduce((a,i)=>(i.demographics[o][c]||0)>(a.demographics[o][c]||0)?i:a,s[0]||{}).state||"N/A"})]})]})]})]})]}),e.jsxs("div",{className:"demographics-info-card",style:{marginTop:"1.5rem"},children:[e.jsx("h3",{className:"demographics-info-title",children:"How to Use:"}),e.jsxs("ul",{style:{fontSize:"0.875rem",color:"#6b7280",marginTop:"0.5rem",paddingLeft:"1rem"},children:[e.jsx("li",{children:"• Select a demographic category and specific metric from the dropdowns"}),e.jsx("li",{children:"• Hover over states on the map to see quick info"}),e.jsx("li",{children:"• Click on states to view detailed demographic breakdowns"}),e.jsx("li",{children:"• Colors indicate percentage intensity - darker colors represent higher percentages"}),e.jsx("li",{children:"• Use the refresh button to reload data"})]})]}),B&&e.jsxs("div",{className:"demographics-info-card demographics-info-card--highlight",style:{marginTop:"1rem"},children:[e.jsx("h3",{className:"demographics-info-title demographics-info-title--highlight",children:"Setup Real Census Data:"}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#1d4ed8",marginTop:"0.5rem"},children:[e.jsx("p",{children:"To use real US Census data, contact me"}),e.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"#2563eb"},children:"US Census API provides data for age groups, race/ethnicity, education levels, and income brackets at the state level."})]})]}),e.jsxs("div",{className:"demographics-info-card",style:{marginTop:"1rem",backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0"},children:[e.jsx("h3",{className:"demographics-info-title",style:{color:"#166534"},children:"Data Sources & API Information:"}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#15803d",marginTop:"0.25rem"},children:e.jsx("p",{children:"This product uses the Census Bureau Data API but is not endorsed or certified by the Census Bureau."})})]})]})]})}export{ee as default};
//# sourceMappingURL=PopDemographics-By8eNtXS.js.map
